---
import LangBadge from './LangBadge'

const { lang, original, summary, title, url } = Astro.props
const slug = url.split('/').pop()
---

<article class="relative">
	<div class="flex flex-col sm:flex-row justify-between mb-2">
		<h3 class="flex mb-1 sm:mb-0 text-lg sm:text-xl font-bold w-full text-gray-900 dark:text-gray-100">
			<a
				href={original?.external ? original.url : url}
				class="transition-opacity opacity-80 hover:opacity-100 after:block after:absolute after:inset-0"
			>
				{lang && (
					<span class="order-2 ml-auto sm:order-none sm:ml-0 sm:mr-2">
						<LangBadge lang={lang} />{' '}
					</span>
				)}
				{title}
				{original?.external && (
					<svg aria-hidden="true" class="inline ml-2 w-4 h-4 align-baseline">
						<use xlink:href="#external-link-icon" />
					</svg>
				)}
			</a>
		</h3>
		{!original?.external && (
			<span data-views-for={slug} class="whitespace-nowrap text-sm sm:text-base text-gray-500 text-left md:text-right">
				&dash;&dash;&dash; views
			</span>
		)}
	</div>
	<p class="text-gray-600 dark:text-gray-400 max-w-2xl">{summary}</p>
</article>
